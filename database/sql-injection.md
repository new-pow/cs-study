## SQL Injectionì´ë€?

> ì•…ì˜ì ì¸ ì‚¬ìš©ìê°€ ë³´ì•ˆìƒì˜ ì·¨ì•½ì ì„ ì´ìš©í•˜ì—¬,Â   
> ì„ì˜ì˜ SQL ë¬¸ì„ ì£¼ì…í•˜ê³  ì‹¤í–‰ë˜ê²Œ í•˜ì—¬  
> ë°ì´í„°ë² ì´ìŠ¤ê°€ ë¹„ì •ìƒì ì¸ ë™ì‘ì„ í•˜ë„ë¡ ì¡°ì‘í•˜ëŠ” í–‰ìœ„

â€» ì¸ì ì…˜ ê³µê²©ì€Â OWASPÂ Top10Â ì¤‘ ì²« ë²ˆì§¸ì— ì†í•´ ìˆìœ¼ë©°,Â 

ê³µê²©ì´ ë¹„êµì  ì‰¬ìš´ í¸ì´ê³  ê³µê²©ì— ì„±ê³µí•  ê²½ìš° í° í”¼í•´ë¥¼ ì…í ìˆ˜ ìˆëŠ” ê³µê²©

(OWASPì´ë€?

â†’ ë³´ì•ˆ ì·¨ì•½ì  ë“±ì„ ì—°êµ¬í•˜ê³ , 10ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì·¨ì•½ì (OWASP TOP 10)ì„ ë°œí‘œ)

---

## ì™œ ë°œìƒí• ê¹Œ?

> ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ Userì˜ í–‰ë™(í´ë¦­, ì…ë ¥ ë“±)ì— ë”°ë¼Â   
> DBì— ìˆëŠ” ë°ì´í„°ë¥¼ ì„œë¡œ ë‹¤ë¥´ê²Œ í‘œì‹œí•œë‹¤.  
>   
> ì´ë¥¼ ìœ„í•´ QueryëŠ” Userê°€ ì…ë ¥í•œ ë°ì´í„°ë¥¼ í¬í•¨í•˜ì—¬ Dynamicí•˜ê²Œ ë³€í•˜ë¯€ë¡œÂ   
> ê°œë°œìê°€ ì˜ë„í•˜ì§€ ì•Šì€ ì •ë³´ë¥¼ ì—´ëŒí•  ìˆ˜ ìˆê²Œ ëœë‹¤.

---

## ì£¼ë¡œ ì–´ë–¨ ë•Œ ë°œìƒí• ê¹Œ?

> í´ë¼ì´ì–¸íŠ¸ì˜ ì…ë ¥ê°’ì„ ì¡°ì‘í•˜ì—¬  
> ì„œë²„ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê³µê²©í•  ìˆ˜ ìˆëŠ” ê³µê²© ë°©ì‹ì´ë‹¤.  
>   
> ì£¼ë¡œ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°ì´í„°ë¥¼ ì œëŒ€ë¡œ í•„í„°ë§, ì´ìŠ¤ì¼€ì´í•‘(ì–´ë–¤ ê²ƒì„ ë¬¸ì í•˜ë‚˜ë¡œ ì¸ì‹)í•˜ì§€ ëª»í–ˆì„ ê²½ìš°ì— ë°œìƒí•œë‹¤.  
>   
> ê³µê²©ì˜ ì‰¬ìš´ ë‚œì´ë„ì— ë¹„í•´ íŒŒê´´ë ¥ì´ ì–´ë§ˆì–´ë§ˆí•˜ë‹¤.

â€» ìœ ë¨¸

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbNSfSH%2FbtrVkXuHGk4%2FrHhJ4pPukx1q3VFCXjBdw0%2Fimg.jpg)

â†’ ê³¼ì†ë°©ì§€ ì¹´ë©”ë¼ì— SQL Injection í•˜ê¸°

---

## ê³µê²© ë°©ë²•

#### 1\. ì¸ì¦ ìš°íšŒ

ë³´í†µ ë¡œê·¸ì¸ì„ í•  ë•Œ,Â ì•„ì´ë””ì™€Â ë¹„ë°€ë²ˆí˜¸ë¥¼ input ì°½ì— ì…ë ¥í•œë‹¤.  
  
ê°€ë²¼ìš´ ì˜ˆë¥¼ ë“¤ì–´ë³´ì.

ì•„ì´ë””ê°€ abc, ë¹„ë°€ë²ˆí˜¸ê°€ ë§Œì•½ 1234ì¼ ë•Œ ì¿¼ë¦¬ëŠ” ì•„ë˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì „ì†¡ë  ê²ƒì´ë‹¤.

```sql
SELECT * FROM USER WHERE ID = "abc" AND PASSWORD = "1234";
```

ğŸš¨ SQL Injectionì„ ì‹œë„í•˜ë ¤ëŠ” ê³µê²©ìê°€

ë¹„ë°€ë²ˆí˜¸ë¥¼Â ' OR '1' = '1ë¼ê³  ì…ë ¥í•˜ë©´?

```sql
SELECT * FROM USER WHERE ID = "admin" AND PASSWORD ='' OR '1' = '1';
```

â†’ ìì„¸íˆ ì‚´í´ë³´ì.

ë”°ì˜´í‘œë¥¼ ì˜¬ë°”ë¥´ê²Œ ë‹«ìœ¼ë©° `password=' '`ë¥¼ ë§Œë“¦ê³¼ ë™ì‹œì— SQL êµ¬ë¬¸ ë’¤ì—Â 

`' OR '1' = '1`'ì„ ë¶™ì˜€ë‹¤.

WHERE ë’¤ì— ìˆëŠ” êµ¬ë¬¸ì„ ê°„ë‹¨íˆ ì¶•ì•½í•˜ë©´Â **false**Â ANDÂ **false**Â ORÂ **true**ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆëŠ”ë°,Â 

ë…¼ë¦¬í•™ì— ë”°ë¥´ë©´ AND ì—°ì‚°ì€ ORë³´ë‹¤ ì—°ì‚° ìš°ì„ ìˆœìœ„ê°€ ë¹ ë¥´ë‹¤.

ë”°ë¼ì„œ í•´ë‹¹ êµ¬ë¬¸ì˜ ì—°ì‚° ê°’ì€ **true**ê°€ ë˜ì–´ ì˜¬ë°”ë¥¸ ê°’ìœ¼ë¡œ íŒë‹¨ë˜ê³ , ì‹¤í–‰í•˜ê²Œ ëœë‹¤.

ì´ë ‡ê²Œ DBë¥¼ ë§ˆìŒëŒ€ë¡œ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.

#### 2\. ë°ì´í„° ë…¸ì¶œ

> ì‹œìŠ¤í…œì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì´ìš©í•´ ê³µê²©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

ë³´í†µ ì—ëŸ¬ëŠ” ê°œë°œìê°€ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ëŠ” ë©´ì—ì„œ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì¡´ì¬ë‹¤.

í•´ì»¤ë“¤ì€ ì´ë¥¼ ì—­ì´ìš©í•´ ì•…ì˜ì ì¸ êµ¬ë¬¸ì„ ì‚½ì…í•˜ì—¬ ì—ëŸ¬ë¥¼ ìœ ë°œì‹œí‚¨ë‹¤.

ì¦‰ ì˜ˆë¥¼ ë“¤ë©´,Â 

**â— GET ë°©ì‹ìœ¼ë¡œ ë™ì‘í•˜ëŠ” URL ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ì„ ì¶”ê°€í•˜ì—¬ ì—ëŸ¬ë¥¼ ë°œìƒ**ì‹œí‚¨ë‹¤.

ì´ì— í•´ë‹¹í•˜ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´,

ì´ë¥¼ í†µí•´ í•´ë‹¹ ì›¹ì•±ì˜ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°ë¥¼ ìœ ì¶”í•  ìˆ˜ ìˆê³  í•´í‚¹ì— í™œìš©í•œë‹¤.

ì˜ˆë¥¼ ë“¤ë©´,Â 

ë¡œê·¸ì¸ í¼ë„ ê²°êµ­ì—” ì„œë²„ì— ìš”ì²­ì„ í•´ì„œ ë°›ëŠ” ê²ƒì´ë‹¤.

HTTP í—¤ë”ë¥¼ ë³´ë©´ ì‘ë‹µ í—¤ë”ì— ì„œë²„ì˜ ì¢…ë¥˜ì™€ ë²„ì „ì´ ë‚˜ì˜¨ë‹¤.

Apache ì„œë²„ëŠ” MySQL ì„œë²„, IISëŠ” MS SQL ê°™ì€ ë°©ì‹ìœ¼ë¡œÂ 

ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¢…ë¥˜ë¥¼ ì¶”ì¸¡í•  ìˆ˜ ìˆë‹¤.

#### 3\. UNION ëª…ë ¹ì–´ë¥¼ ì´ìš©í•œ SQL Injection

â€» SQL UNIONì´ë€?

â†’ ì—¬ëŸ¬ ê°œì˜ SQLë¬¸ì„ í•©ì³ í•˜ë‚˜ì˜ SQLë¬¸ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´Â 

```
select name from classA 
union
select name from classB;
```

ë¥¼ í•˜ê²Œ ë˜ë©´,Â 

í´ë˜ìŠ¤ Aì™€ í´ë˜ìŠ¤ Bì˜ ì´ë¦„ë“¤ì´ í•©ì³ì ¸ì„œ ì¶œë ¥ëœë‹¤.

ğŸš¨ UnionÂ í‚¤ì›Œë“œì™€ í•¨ê»˜ ì»¬ëŸ¼ ìˆ˜ë¥¼ ë§ì¶°ì„œÂ SELECTÂ êµ¬ë¬¸ì„ ë„£ì–´ì£¼ê²Œ ë˜ë©´

**ë‘ ì¿¼ë¦¬ë¬¸ì´ í•©ì³ì„œì„œ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ë³´ì—¬ì§€ê²Œ ëœë‹¤.**

ë˜ í•˜ë‚˜ì˜ ì˜ˆë¥¼ ë“¤ë©´,

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbkeXBY%2FbtrVjQJo1Ai%2FkubM86HNSGqkCKi82suDk0%2Fimg.png)

ìœ„ì˜ ì‚¬ì§„ì€ Boardë¼ëŠ” í…Œì´ë¸”ì—ì„œ ê²Œì‹œê¸€ì„ ê²€ìƒ‰í•˜ëŠ” ì¿¼ë¦¬ë¬¸ì´ë‹¤.

ì…ë ¥ê°’(INPUT)ì„ titleê³¼ contents ì»¬ëŸ¼ì˜ ë°ì´í„°ë‘ ë¹„êµí•œ ë’¤Â 

ê¸€ìê°€ ìˆëŠ” ê²Œì‹œê¸€ì„ ì¶œë ¥í•˜ëŠ” ê²ƒì´ë‹¤.

ì—¬ê¸°ì„œ ì…ë ¥ê°’ìœ¼ë¡œ UNION í‚¤ì›Œë“œì™€ í•¨ê»˜ ì»¬ëŸ¼ ìˆ˜ë¥¼ ë§ì¶°Â 

SELECT êµ¬ë¬¸ì„ ë„£ì–´ì£¼ê²Œ ë˜ë©´,Â 

ë‘ ì¿¼ë¦¬ë¬¸ì´ í•©ì³ì ¸ì„œ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ë³´ì—¬ì§€ê²Œ ëœë‹¤.

**â—** í˜„ì¬ Injectioní•œ êµ¬ë¬¸ì€ ì‚¬ìš©ìì˜ idì™€ passwordë¥¼ ìš”ì²­í•˜ëŠ” ì¿¼ë¦¬ë¬¸ì´ ëœë‹¤.

âˆ´ ì¸ì ì…˜ì´ ì„±ê³µí•˜ë©´, ì‚¬ìš©ìì˜ ê°œì¸ì •ë³´ê°€ ê²Œì‹œê¸€ê³¼ í•¨ê»˜ í™”ë©´ì— ë³´ì—¬ì§€ê²Œ ëœë‹¤.

---

## ë°©ì–´ ë°©ë²•

#### 1\. input ê°’ì„ ë°›ì„ ë•Œ, íŠ¹ìˆ˜ë¬¸ì ì—¬ë¶€ ê²€ì‚¬í•˜ê¸°

(ì¦‰, ì…ë ¥ê°’ì— ëŒ€í•œ ê²€ì¦ì´ë‹¤.)

> ë¡œê·¸ì¸ ì „, ê²€ì¦ ë¡œì§ì„ ì¶”ê°€í•˜ì—¬ ë¯¸ë¦¬ ì„¤ì •í•œ íŠ¹ìˆ˜ë¬¸ìë“¤ì´ ë“¤ì–´ì™”ì„ ë•Œ ìš”ì²­ì„ ë§‰ì•„ë‚¸ë‹¤.

#### 2\. SQL ì„œë²„ ì˜¤ë¥˜ ë°œìƒ ì‹œ, í•´ë‹¹í•˜ëŠ” ì—¬ëŸ¬ ë©”ì‹œì§€ ê°ì¶”ê¸°

> viewë¥¼ í™œìš©í•˜ì—¬ ì›ë³¸ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì—ëŠ” ì ‘ê·¼ ê¶Œí•œì„ ë†’ì¸ë‹¤.  
> ì¼ë°˜ ì‚¬ìš©ìëŠ” viewë¡œë§Œ ì ‘ê·¼í•˜ì—¬ ì—ëŸ¬ë¥¼ ë³¼ ìˆ˜ ì—†ë„ë¡ ë§Œë“ ë‹¤.

#### 3\. prepared statement ì‚¬ìš©í•˜ê¸°

> Prepared Statement êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´,Â   
> ì‚¬ìš©ìì˜ ì…ë ¥ ê°’ì´ ë°ì´í„°ë² ì´ìŠ¤ì˜ íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ê°€ê¸° ì „ì—Â   
> DBMSê°€ ë¯¸ë¦¬ ì»´íŒŒì¼ í•˜ì—¬ ì‹¤í–‰í•˜ì§€ ì•Šê³  ëŒ€ê¸°í•œë‹¤.

preparestatementë¥¼ ì‚¬ìš©í•˜ë©´, íŠ¹ìˆ˜ë¬¸ìë¥¼ ìë™ìœ¼ë¡œ escaping í•´ì¤€ë‹¤.  
(statementì™€ëŠ” ë‹¤ë¥´ê²Œ ì¿¼ë¦¬ë¬¸ì—ì„œ ì „ë‹¬ì¸ì ê°’ì„Â ?ë¡œ ë°›ëŠ” ê²ƒ)  
ì´ë¥¼ í™œìš©í•´ ì„œë²„ ì¸¡ì—ì„œ í•„í„°ë§ ê³¼ì •ì„ í†µí•´ì„œ ê³µê²©ì„ ë°©ì–´í•œë‹¤.

â€» ì°¸ê³  : Statementì™€ Prepared Statementì˜ íŠ¹ì§•

[https://iksflow.tistory.com/127](https://iksflow.tistory.com/127)

#### 4\. Error Message ë…¸ì¶œ ê¸ˆì§€

> ë°ì´í„°ë² ì´ìŠ¤ ì—ëŸ¬ ë°œìƒ ì‹œ ë”°ë¡œ ì²˜ë¦¬ë¥¼ í•´ì£¼ì§€ ì•Šì•˜ë‹¤ë©´,Â   
> ì—ëŸ¬ê°€ ë°œìƒí•œ ì¿¼ë¦¬ë¬¸ê³¼ í•¨ê»˜ ì—ëŸ¬ì— ê´€í•œ ë‚´ìš©ì„ ë°˜í™˜í•´ì¤€ë‹¤.  
>   
> ì´ë•Œ, í…Œì´ë¸”ëª… ë° ì»¬ëŸ¼ëª… ê·¸ë¦¬ê³  ì¿¼ë¦¬ë¬¸ì´ ë…¸ì¶œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—Â   
> ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì˜¤ë¥˜ ë°œìƒ ì‹œÂ   
> ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¥¼ ì œì‘í•˜ì—¬ì•¼ í•œë‹¤.

---

### ì¶œì²˜

-   [https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Database/SQL%20Injection.md](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Database/SQL%20Injection.md)
-   [https://noirstar.tistory.com/264](https://noirstar.tistory.com/264)
-   [https://namu.wiki/w/SQL%20injection](https://namu.wiki/w/SQL%20injection)
-   [https://m.blog.naver.com/lstarrlodyl/221837243294](https://m.blog.naver.com/lstarrlodyl/221837243294)